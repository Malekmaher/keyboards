<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>

<meta name="viewport" content="width=device-width,initial-scale=1" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-7UMrFl8Q8OxrxBgcXtVgP+32Pj7xMPgLTgbU4Sy02tG+ATaZ2zUwHLU4KczV8T36Ov1gTo0VbTwHyJjT5JH3xg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<link rel="stylesheet" href="index.css">
<script type="module" src="cart.js"></script>
<title>Nogaliim - Cart</title>
<script src="https://js.stripe.com/v3/"></script>
</head>
<body>
<header>



<nav>

<div class="menu-container">
  <div id="menu-toggle">
    <div class="hamburger"></div>
    Menu
  </div>
  <div id="dropdown">
    <a href="index.html">ğŸ  Home</a>
    <a href="cart.html">ğŸ›’ Cart</a>
    <a href="all.html">ğŸ“¦ All</a>
    <a href="socials.html">ğŸŒ Our Socials</a>
  </div>
</div>

<script>
  const toggle = document.getElementById("menu-toggle");
  const dropdown = document.getElementById("dropdown");

  toggle.addEventListener("click", () => {
    dropdown.classList.toggle("show");
  });
</script>
<button class="logout-button" onclick="logout()">Logout</button>
</nav>
</header>
<div class="container">
<div class="header">
<div class="brand">
<div>
</div>
</div>
</div>
<div class="layout">
<section class="card" id="cart-section">
<div style="display:flex;justify-content:space-between;align-items:center;">
<h2 style="margin:0">Cart</h2>
<div class="small">Edit or remove items</div>
</div>
<div id="cart-list" class="cart-list" style="margin-top:12px;"></div>
<div id="cart-empty" class="small" style="display:none;padding:12px;background:#fff7f7;border-radius:8px;color:#666">Your cart is empty.</div>
<div style="height:12px"></div>
<div class="summary">
<div class="total-row"><div>Subtotal</div><div>EGP <span id="subtotal">0</span></div></div>
<div class="total-row"><div>Shipping</div><div>EGP <span id="shipping">0</span></div></div>
<div class="total-row" style="font-size:18px"><div>Total</div><div>EGP <span id="total">0</span></div></div>
<div style="display:flex;gap:8px;margin-top:8px">
<button id="checkout-now" class="btn" style="flex:1">Checkout â€” Stripe</button>
<button id="clear-cart" class="btn-ghost" style="flex:0 0 120px">Clear</button>
</div>
<div class="note">Stripe Checkout will open in a new page. Apple Pay / Google Pay appear automatically if available.</div>
</div>
</section>
<aside class="card" id="checkout-section">
<h2 style="margin:0">Checkout</h2>
<div class="small" style="margin-top:6px">Shipping details (saved locally)</div>
<div class="checkout-area" style="margin-top:12px;">
<input id="name" class="input" placeholder="Full name" />
<input id="phone" class="input" placeholder="Phone number" />
<textarea id="address" class="input" placeholder="Address: street, city, governorate"></textarea>
<div style="display:flex;gap:8px">
<button id="detect-loc" class="btn-ghost" style="flex:1">Detect location</button>
<button id="save-details" class="btn" style="flex:1">Save</button>
</div>
<div id="loc-msg" class="small"></div>
<div style="height:8px"></div>
<div class="small">Order preview</div>
<div id="preview-items" style="max-height:220px;overflow:auto;border-radius:8px;padding:8px;background:#fbfffb"></div>
<div id="payment-info" class="small">When you press Checkout you'll be redirected to the checkout secure page.</div>
</div>
</aside>
</div>
<div id="thank-section" class="card hidden" style="margin-top:18px">
<div class="thank">
<h2>âœ… Payment successful</h2>
<p id="thank-msg" class="small"></p>
<div style="height:12px"></div>
<button id="back-home" class="btn">Back (reload)</button>
</div>
</div>
<div class="footer">Local orders and shipping saved to browser storage. Connect server / webhooks later to persist orders.</div>
</div>
<script>
const firebaseConfig = {
  apiKey:"AIzaSyCl2VZqcUi1rtso-_CzBwhnlGYGqydEiRU",
  authDomain:"nogalim-58121.firebaseapp.com",
  projectId: "nogalim-58121",
  storageBucket: "nogalim-58121.firebasestorage.app",
  messagingSenderId: "791547602130",
  appId: "1:791547602130:web:34b88883dec222718b790b",
};

firebase.initializeApp(firebaseConfig);
window.db = firebase.firestore();
window.doc = firebase.firestore().doc;
window.getDoc = firebase.firestore().getDoc;
window.setDoc = firebase.firestore().setDoc;
</script>

<script src="cart.js"></script>

</body>
</html>